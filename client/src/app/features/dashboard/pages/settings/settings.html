<div class="settings-container">
  <div class="settings-header">
    <h1>Settings</h1>
    <p>Manage your account preferences and link settings</p>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading">
    <div class="loading-spinner">
      <i class="fas fa-spinner fa-spin"></i>
    </div>
    <p>Loading settings...</p>
  </div>

  <!-- Settings Content -->
  <div class="settings-content" *ngIf="!isLoading">
    <!-- Error Message -->
    <div class="alert alert-error" *ngIf="errorMessage">
      <i class="fas fa-exclamation-triangle"></i>
      {{ errorMessage }}
    </div>

    <!-- Success Message -->
    <div class="alert alert-success" *ngIf="successMessage">
      <i class="fas fa-check-circle"></i>
      {{ successMessage }}
    </div>

    <form (ngSubmit)="onSaveSettings()" class="settings-form">
      <!-- Appearance Settings -->
      <div class="settings-section">
        <h2>
          <i class="fas fa-palette"></i>
          Appearance
        </h2>
        
        <div class="form-group">
          <label for="theme">Theme Preference</label>
          <div class="theme-options">
            <div 
              *ngFor="let option of themeOptions" 
              class="theme-option"
              [class.active]="settings.theme === option.value"
              (click)="selectTheme(option.value)"
            >
              <i [class]="option.icon"></i>
              <span>{{ option.label }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Link Settings -->
      <div class="settings-section">
        <h2>
          <i class="fas fa-link"></i>
          Link Settings
        </h2>
        
        <div class="form-group">
          <label for="linkExpiration">Default Link Expiration</label>
          <select id="linkExpiration" [(ngModel)]="settings.linkExpiration" name="linkExpiration" class="form-control">
            <option *ngFor="let option of expirationOptions" [value]="option.value">
              {{ option.label }}
            </option>
          </select>
          <small class="form-help">Choose how long your links should remain active by default</small>
        </div>

        <div class="form-group">
          <label for="customDomain">Custom Domain (Optional)</label>
          <input 
            type="url" 
            id="customDomain" 
            [(ngModel)]="settings.customDomain" 
            name="customDomain"
            class="form-control"
            placeholder="https://your-domain.com"
          />
          <small class="form-help">Use your own domain for branded short links</small>
        </div>

        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="settings.analyticsEnabled" name="analyticsEnabled" />
            <span class="checkmark"></span>
            Enable link analytics
            <small>Track clicks, locations, and referrers for your links</small>
          </label>
        </div>

        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="settings.autoDeleteExpired" name="autoDeleteExpired" />
            <span class="checkmark"></span>
            Auto-delete expired links
            <small>Automatically remove links after they expire</small>
          </label>
        </div>
      </div>

      <!-- Notification Settings -->
      <div class="settings-section">
        <h2>
          <i class="fas fa-bell"></i>
          Notifications
        </h2>
        
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="settings.emailNotifications" name="emailNotifications" />
            <span class="checkmark"></span>
            Email notifications
            <small>Receive updates about your links and account</small>
          </label>
        </div>
      </div>

      <!-- Account Information -->
      <div class="settings-section" *ngIf="currentUser">
        <h2>
          <i class="fas fa-user"></i>
          Account Information
        </h2>
        
        <div class="account-info">
          <div class="info-item">
            <label>Email Address</label>
            <span>{{ currentUser.email }}</span>
          </div>
          <div class="info-item">
            <label>Account Created</label>
            <span>{{ getCurrentDate() | date:'medium' }}</span>
          </div>
          <div class="info-item">
            <label>Last Login</label>
            <span>{{ getCurrentDate() | date:'medium' }}</span>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="settings-actions">
        <div class="primary-actions">
          <button type="button" class="btn-secondary" (click)="onResetSettings()">
            <i class="fas fa-undo"></i>
            Reset to Default
          </button>
          <button type="submit" class="btn-primary" [disabled]="isSaving">
            <i class="fas fa-spinner fa-spin" *ngIf="isSaving"></i>
            <i class="fas fa-save" *ngIf="!isSaving"></i>
            {{ isSaving ? 'Saving...' : 'Save Settings' }}
          </button>
        </div>
        
        <div class="secondary-actions">
          <button type="button" class="btn-outline" (click)="onExportData()">
            <i class="fas fa-download"></i>
            Export Data
          </button>
        </div>
      </div>
    </form>

    <!-- Danger Zone -->
    <div class="settings-section danger-zone">
      <h2>
        <i class="fas fa-exclamation-triangle"></i>
        Danger Zone
      </h2>
      <p>These actions are irreversible. Please be careful.</p>
      
      <button type="button" class="btn-danger" (click)="onDeleteAccount()">
        <i class="fas fa-trash-alt"></i>
        Delete Account
      </button>
    </div>
  </div>
</div>
